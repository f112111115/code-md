# 影像文字辨識程式碼說明

## 1. 系統初始化與環境設置

程式開始時，會執行以下步驟來準備環境：
- **安裝必要套件**：
  - 使用 `pip install` 安裝 PaddleOCR 和 PaddlePaddle-GPU 來進行高效的文字辨識處理。
  - 安裝 `tesseract-ocr`、`pytesseract` 和 `opencv-python`，提供額外的 OCR 支援。
- **掛載 Google Drive**：
  - 利用 Colab 指令 `drive.mount()` 掛載 Google Drive，讀取和儲存處理所需的圖片和結果檔案。

---

## 2. 使用 PaddleOCR 進行文字識別

### 2.1 單張圖片辨識

- **功能**：
  - 使用 PaddleOCR 載入指定圖片並進行文字辨識。
- **操作**：
  1. 指定圖片檔案路徑。
  2. 使用 `ocr.ocr()` 方法執行識別，取得文字框、辨識文字和置信度分數。
  3. 利用 `draw_ocr` 繪製辨識結果於圖片上，並儲存標記完成的圖片。

---

### 2.2 批量處理圖片

- **功能**：
  - 自動處理整個資料夾中的所有圖片，進行批量文字識別並輸出結果。
- **操作步驟**：
  1. 定義**輸入資料夾**（來源圖片）和**輸出資料夾**（處理後圖片）。
  2. 遍歷輸入資料夾內所有符合格式的圖片檔案（`.jpg`, `.jpeg`, `.png`）。
  3. 使用 PaddleOCR 辨識每張圖片中的文字內容與位置。
  4. 繪製文字標記，將處理後的圖片儲存到輸出資料夾。
  5. 若圖片無有效結果，程式將跳過該圖片。

---

## 3. 使用 Tesseract OCR 提取特定格式文字

### 3.1 正則表達式匹配

- **功能**：
  - 使用 Tesseract OCR 從圖片中提取文字，並匹配符合特定格式的內容。  
  - 例如：`A1-123` 這種格式，透過正則表達式篩選出來。
- **操作步驟**：
  1. 定義正則表達式格式：`[A-Za-z]\d{1,2}-\d{3,}`。
  2. 使用 `pytesseract` 對圖片進行文字提取。
  3. 利用正則表達式匹配符合條件的文字內容。
  4. 將結果儲存為 `.txt` 檔案，並命名與圖片檔案一致。

---

## 4. 批量處理與輸出文字檔案

- **功能**：
  - 自動從圖片資料夾中處理所有圖片，並將辨識出的文字儲存成文字檔案。
- **步驟**：
  1. 定義**輸入圖片資料夾**和**輸出文字資料夾**。
  2. 遍歷資料夾中的所有圖片檔案。
  3. 使用 Tesseract OCR 提取圖片中的文字。
  4. 根據正則表達式篩選有效結果。
  5. 將結果寫入文字檔案，並輸出到指定資料夾。

---

## 5. 輸出結果

- **圖片輸出**：
  - 處理後的圖片會被儲存至指定的「**輸出圖片資料夾**」。
- **文字檔輸出**：
  - 從圖片中辨識出的特定格式文字會儲存為 `.txt` 檔案，位於「**輸出文字資料夾**」。

---

## 6. 結論

本程式結合 **PaddleOCR** 與 **Tesseract OCR** 進行多階段的文字辨識：
- 支援**單張圖片處理**與**批量處理**。
- 可提取特定格式的文字內容，並將結果可視化於圖片上或儲存為文字檔。

