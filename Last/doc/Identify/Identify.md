# 表格辨識程式碼說明

## 1. 系統初始化和環境設置

程式開始時，使用以下命令來設置運行環境：
- `!nvidia-smi`：檢查 GPU 設備狀態。
- `!pip install paddlepaddle-gpu`：安裝支持 GPU 加速的 PaddlePaddle 庫。
- `!pip install "paddleocr>=2.0.1"`：安裝 PaddleOCR 庫，用於文字識別。

## 2. 使用 PaddleOCR 進行文字識別

- `掛載 Google Drive，並從指定資料夾中加載圖片。
- `使用 PaddleOCR 進行文字識別，並將識別結果繪製回圖片上，將結果保存到新的資料夾中。

## 3. 文字識別過程

使用 `ocr.ocr()` 方法對灰階圖像進行文字識別，返回識別結果。結果為一個包含文字框和識別內容的列表。

## 4. 定義同一行文字的判斷方法

- `is_same_row(box1, box2)`：定義了一個函數，用於判斷兩個文字框是否在同一行。根據 y 軸座標的差異來進行判斷，若差異小於設置的閾值，則認為兩者在同一行。

## 5. 找到指定文字

- 在 OCR 識別結果中，搜索是否包含 "儀器編號" 的文字，若找到，則記錄其位置（即文字框）。

## 6. 找到同一行的其他文字

- 若找到 "儀器編號"，則繼續檢查該行中的其他文字框，使用 `is_same_row` 判斷是否為同一行，並將符合條件的文字加入結果。

## 7. 可視化顯示結果

- 使用 `draw_ocr()` 方法將識別出的文字框與文本標註在原圖上，並顯示結果。

## 8. 下載和使用自定義字體

程式中包括下載自定義字體的步驟：
- `!wget`：下載字體文件（例如 `TaipeiSansTCBeta-Regular.ttf` 和 `NotoSansCJKsc-hinted.zip`）。
- 使用下載的字體進行文字顯示，以便更好地呈現中文字符。

## 9. 處理不同圖片

程式能處理多張不同的圖片，並進行文字識別、定位及同一行文字的提取。處理過程中包括：
- 載入圖片。
- 執行 OCR 識別。
- 可視化顯示結果。

## 10. 結果儲存

識別結果可以顯示在螢幕上，也可以儲存為圖像文件。

---

## 結論

此程式碼的主要功能是通過 OCR 進行圖片中文字的識別，並找出包含 "儀器編號" 的文字及其相關的同一行文字，最後將結果可視化並顯示或儲存圖像。程式對圖片處理的過程包括文字識別、行識別、文字框繪製等，並且支援中文顯示字體的定制。
